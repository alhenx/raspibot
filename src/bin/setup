#!/bin/sh

# Raspibot's setup script.
# Raúl Díez Sánchez - Alejandro Chacón Peregrino.

INSTALLDIR="/opt/raspibot-setup"
BOTPATH="$INSTALLDIR/raspibot"
RASPIBOTSYSCTL_FILE="/usr/local/bin/raspibotsysctl"
RASPIBOT_SERVICE="raspibot.service"
SYS_USER=$(echo $USER)



CHOICE=$(dialog --title "RaspiBOT setup" --menu "Setup options:" 13 60 4 \
"01" "Setup RaspiBOT on your system" \
"02" "Update RaspiBOT" \
"03" "Remove RaspiBOT from your system" \
"04" "Exit" 3>&2 2>&1 1>&3)
case $CHOICE in
	01)
		dialog --title "Installing RaspiBOT" --infobox "Starting RaspiBOT setup..." 8 60
		sleep 0.5
		SUDO_PASS=$(dialog --passwordbox "First of all, I will need your sudo pass" 6 60	 --title "Installing RaspiBOT" 3>&1 1>&2 2>&3)
		sleep 0.5|dialog --title "Installing RaspiBOT" --gauge "\nUpdating your system and installing some dependencies..." 8 60 5
		#echo $SUDO_PASS | sudo -kS apt-get update >/dev/null | 
		sleep 3| dialog --title "Installing RaspiBOT" --gauge "\nUpdating your system and installing some dependencies..." 8 60 20
		#echo $SUDO_PASS | sudo -kS apt-get install -y python3-pip >/dev/null | 
		sleep 3| dialog --title "Installing RaspiBOT" --gauge "\nUpdating your system and installing some dependencies..." 8 60 60
		#echo $SUDO_PASS | sudo -kS apt-get install -y transmission-cli >/dev/null | 
		sleep 3| dialog --title "Installing RaspiBOT" --gauge "\nUpdating your system and installing some dependencies..." 8 60 95
		#echo $SUDO_PASS | sudo -kS pip3 install python-telegram-bot >/dev/null | 
		sleep 1| dialog --title "Installing RaspiBOT" --gauge "\nUpdating your system and installing some dependencies..." 8 60 100

	;;
	### END CASE 1
	02)
		
	;;
	### END CASE 2
	03)
		
	;;
	### END CASE 3
	04)
		clear #before exits
		exit
	;;
esac


clear #before exits
#end